{"version":3,"sources":["../../src/subscribe/subscribe.controller.ts"],"sourcesContent":["import {\r\n  Body,\r\n  Controller,\r\n  Delete,\r\n  Get,\r\n  Param,\r\n  Post,\r\n  Req,\r\n} from '@nestjs/common';\r\nimport { SubscribeService } from './subscribe.service';\r\nimport { SubscribeDto } from './dto/Subscription.dto';\r\nimport { Request } from 'express';\r\nimport { ApiBearerAuth, ApiTags } from '@nestjs/swagger';\r\nimport { CreateNotificationDto } from './dto/create-notication.dto';\r\n\r\n@ApiTags('Subscribe')\r\n@ApiBearerAuth()\r\n@Controller('subscribe')\r\nexport class SubscribeController {\r\n  constructor(private readonly subscribeService: SubscribeService) {}\r\n\r\n  @Post()\r\n  async subscribeUser(\r\n    @Req() req: Request, \r\n    @Body() subscribeDto: SubscribeDto\r\n  ){\r\n    const userPhone = (req.user as any).result.phone;\r\n    return await this.subscribeService.subscribeUser(userPhone, subscribeDto);\r\n  }\r\n\r\n  @Delete()\r\n  async unsubscribeUser(\r\n    @Req() req: Request\r\n  ){\r\n    const userPhone = (req.user as any).result.phone;\r\n    return this.subscribeService.unsubscribeUser(userPhone);\r\n  }\r\n\r\n  @Get('send-notif')\r\n  async sendNotif(){\r\n    return await this.subscribeService.sendNotif();\r\n  }\r\n  @Post('send-data-notif')\r\n  async sendContent(\r\n    @Body() notDto: CreateNotificationDto\r\n  ){\r\n    const { title, content } = notDto;\r\n    return this.subscribeService.sendContent(title, content);\r\n  }\r\n}\r\n"],"names":["SubscribeController","subscribeUser","req","subscribeDto","userPhone","user","result","phone","subscribeService","unsubscribeUser","sendNotif","sendContent","notDto","title","content","constructor"],"mappings":";;;;+BAkBaA;;;eAAAA;;;wBAVN;kCAC0B;iCACJ;yBACL;yBACe;qCACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAK/B,IAAA,AAAMA,sBAAN,MAAMA;IAILC,cACJ,AAAOC,GAAY,EACnB,AAAQC,YAA0B;;eAHpC,oBAAA;YAKE,MAAMC,YAAY,AAACF,IAAIG,IAAI,CAASC,MAAM,CAACC,KAAK;YAChD,OAAO,MAAM,MAAKC,gBAAgB,CAACP,aAAa,CAACG,WAAWD;QAC9D;;IAGMM,gBACJ,AAAOP,GAAY;;eAFrB,oBAAA;YAIE,MAAME,YAAY,AAACF,IAAIG,IAAI,CAASC,MAAM,CAACC,KAAK;YAChD,OAAO,MAAKC,gBAAgB,CAACC,eAAe,CAACL;QAC/C;;IAGMM;;eADN,oBAAA;YAEE,OAAO,MAAM,MAAKF,gBAAgB,CAACE,SAAS;QAC9C;;IAEMC,YACJ,AAAQC,MAA6B;;eAFvC,oBAAA;YAIE,MAAM,EAAEC,KAAK,EAAEC,OAAO,EAAE,GAAGF;YAC3B,OAAO,MAAKJ,gBAAgB,CAACG,WAAW,CAACE,OAAOC;QAClD;;IA7BAC,YAAY,AAAiBP,gBAAkC,CAAE;aAApCA,mBAAAA;IAAqC;AA8BpE"}